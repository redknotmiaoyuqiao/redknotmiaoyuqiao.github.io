<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/github-light.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Android Studio 和 NDK by redknotmiaoyuqiao</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/redknotmiaoyuqiao">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Android Studio 和 NDK</h1>
            <h2></h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <div id="no-downloads">
        <span class="inner">
        </span>
      </div>


      <span class="banner-fix"></span>


      <section id="main_content">
      	这篇文章介绍使用 Android Studio 开发 NDK 项目的配置过程。<br><br>
      	其实网上的教程并不算少数，但是！都不好使。<br><br>
      	对于一天到晚写 Java 代码的 Android 程序员来说，突然让他写 C++ ，确实需要我这篇博客。<br><br>
      	所谓 NDK ，无非就是一个嵌入式平台的交叉编译器，把 C++ 代码编译成手机平台可以运行的库，让 Java 通过 JNI 调用。<br><br>
      	1,写原生方法，在 Java 代码中写一个 native 方法，如下图的 getStringFromC() 方法，这个方法是调用原生方法的入口。<br><br>
      	<img style="width:100%" src="img/ndk0000.png"/><br><br>
      	2,根据这个方法，生成对应的头文件。可以使用 Java 提供的 javah 命令<br><br>
      	<pre>
      	javah -jni com.redknot.redimagefilterlib.Demo
      	</pre>
      	3,将生成的 .h 文件拷贝到 src/main/jni 文件夹之下（没有 jni 自己建立一个）<br><br>
      	4,在 jni 文件夹下面建立 .c 文件，引入刚才建立的 .h 文件，实现里面的方法。<br><br>
      	<img style="width:100%" src="img/ndk0001.png"/><br><br>
      	5,在 jni 下建立 Application.mk 文件，这个文件里面是给编译器看的，说明了目标平台，C++ 的版本等信息，不明白的可以先按照我这个来<br><br>
      	<img style="width:100%" src="img/ndk0002.png"/><br><br>
      	6,在 jni 下建立 Android.mk 文件，这个文件也是给编译器看的<br><br>
      	<img style="width:100%" src="img/ndk0003.png"/><br><br>
      	目前来说，重要的是这三行<br><br>
      	<img style="width:100%" src="img/ndk0004.png"/><br><br>
      	第一行是编译成模块的模块名称<br>
      	第二行是要参与编译的源文件<br>
      	第三行是要引入的库<br>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>Projects by <a href="https://github.com/redknotmiaoyuqiao">redknotmiaoyuqiao</a> can be found on <a href="https://github.com/redknotmiaoyuqiao">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="https://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
